# Template file for 'borgmatic'
pkgname=borgmatic
version=2.1.1
revision=1
build_style=python3-pep517
make_check_args="--deselect=tests/integration/commands/test_borgmatic.py::test_borgmatic_version_matches_news_version"
hostmakedepends="python3-setuptools python3-wheel"
depends="borg python3-ruamel.yaml python3-jsonschema python3-requests
 python3-packaging"
checkdepends="${depends} python3-pytest python3-flexmock python3-apprise"
short_desc="Wrapper script for the Borg backup software"
maintainer="Joel Beckmeyer <joel@beckmeyer.us>"
license="GPL-3.0-or-later"
homepage="https://torsion.org/borgmatic/"
changelog="https://projects.torsion.org/borgmatic-collective/borgmatic/raw/branch/master/NEWS"
distfiles="${PYPI_SITE}/b/borgmatic/borgmatic-${version}.tar.gz"
checksum=3c23cacf9e88a9712f4ec5cf4fa595e69c6d600eba5477f80fe2ca396067b109

post_patch() {
	vsed -i pyproject.toml -e 's/--cov-report.*--cov-fail-under=100//'
}
