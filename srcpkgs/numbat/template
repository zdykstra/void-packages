# Template file for 'numbat'
pkgname=numbat
version=1.22.0
revision=1
build_wrksrc=numbat-cli
build_style=cargo
hostmakedepends="pkg-config"
makedepends="openssl-devel"
short_desc="Statically typed programming language for scientific computations"
maintainer="Orphaned <orphan@voidlinux.org>"
license="Apache-2.0 OR MIT"
homepage="https://numbat.dev"
changelog="https://github.com/sharkdp/numbat/releases"
distfiles="https://github.com/sharkdp/numbat/archive/refs/tags/v${version}.tar.gz"
checksum=db5d9c2c0ec113f6773c22e7c09c51c08a62a196ca28a2008ff11546c77297bb

post_patch() {
	# apply patched Cargo.toml changes to lockfile
	cargo metadata > /dev/null
}

post_install() {
	cd ${wrksrc}
	vlicense LICENSE-MIT
	vdoc README.md

	vmkdir usr/share/numbat
	vcopy numbat/modules usr/share/numbat

	vinstall assets/numbat.desktop 644 usr/share/applications
	vinstall assets/numbat.svg 644 usr/share/icons/hicolor/scalable/apps
	for s in 16 22 24 32 48 64 128 256 512; do
		vinstall "assets/numbat-${s}x${s}.png" 644 \
			"usr/share/icons/hicolor/${s}x${s}/apps" numbat.png
	done
}
