# Template file for 'oniux'
pkgname=oniux
version=0.8.0
revision=1
archs="x86_64* i686* aarch64* arm*" # ring
build_style=cargo
hostmakedepends="pkg-config"
makedepends="libzstd-devel sqlite-devel openssl-devel"
short_desc="Isolate an arbitrary application over the Tor network"
maintainer="Duncaen <duncaen@voidlinux.org>"
license="MIT OR Apache-2.0"
homepage="https://gitlab.torproject.org/tpo/core/oniux"
changelog="https://gitlab.torproject.org/tpo/core/oniux/-/tags"
distfiles="https://gitlab.torproject.org/tpo/core/oniux/-/archive/v${version}/oniux-v${version}.tar.gz"
checksum=9c92a1008f015cf9c8d5883e3ed1acc4577f8321ff23a2ab15c04c738612be5b

# aws-lc-sys only ships pre-generated files for certain architectures
case "${XBPS_TARGET_MACHINE}" in
armv[67]l*)
	hostmakedepends+=" cmake rust-bindgen"
	;;
esac

post_install() {
	vlicense LICENSE-MIT
}
