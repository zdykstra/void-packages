# Template file for 'oniux'
pkgname=oniux
version=0.8.1
revision=1
archs="x86_64* i686* aarch64* arm*" # ring
build_style=cargo
hostmakedepends="pkg-config"
makedepends="libzstd-devel sqlite-devel openssl-devel"
short_desc="Isolate an arbitrary application over the Tor network"
maintainer="Duncaen <duncaen@voidlinux.org>"
license="MIT OR Apache-2.0"
homepage="https://gitlab.torproject.org/tpo/core/oniux"
changelog="https://gitlab.torproject.org/tpo/core/oniux/-/tags"
distfiles="https://gitlab.torproject.org/tpo/core/oniux/-/archive/v${version}/oniux-v${version}.tar.gz"
checksum=d8d6f057c8ca6e27c59e6309f504d8c5a457ad537b65a509118750eaee60c6fc

# aws-lc-sys only ships pre-generated files for certain architectures
case "${XBPS_TARGET_MACHINE}" in
armv[67]l*)
	hostmakedepends+=" cmake rust-bindgen"
	;;
esac

post_install() {
	vlicense LICENSE-MIT
}
